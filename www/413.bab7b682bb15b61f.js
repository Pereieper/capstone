"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[413],{413:(m,d,a)=>{a.r(d),a.d(d,{LoginPage:()=>h});var g=a(467),i=a(9420),c=a(4341),p=a(2200),e=a(3664),_=a(8347),u=a(1815);let h=(()=>{class l{constructor(n,o,t){this.router=n,this.registrationService=o,this.toastController=t,this.phone="",this.password="",this.rememberMe=!1}ngOnInit(){var n=this;return(0,g.A)(function*(){const o=localStorage.getItem("savedPhone");o&&(n.phone=o,n.rememberMe=!0)})()}login(){var n=this;return(0,g.A)(function*(){if(!n.phone||!n.password)return void n.presentToast("\u26a0\ufe0f Please enter phone and password","warning");const o=n.phone.startsWith("0")?"+63"+n.phone.slice(1):n.phone,t=yield n.registrationService.checkLogin(o,n.password);if(t)switch(n.presentToast("\u2705 Login successful!","success"),n.rememberMe?localStorage.setItem("savedPhone",n.phone):localStorage.removeItem("savedPhone"),yield n.registrationService.setCurrentUser(t),t.role){case"secretary":n.router.navigate(["/secretary-dashboard"]);break;case"captain":n.router.navigate(["/captain-dashboard"]);break;default:n.router.navigate(["/resident-dashboard"])}else n.presentToast("\u274c Invalid phone or password.","danger")})()}goToForgotPassword(){this.router.navigate(["/forgot-password"])}goToRegister(){this.router.navigate(["/registration"])}presentToast(n,o){var t=this;return(0,g.A)(function*(){yield(yield t.toastController.create({message:n,duration:2500,color:o,position:"top"})).present()})()}static#e=this.\u0275fac=function(o){return new(o||l)(e.rXU(_.Ix),e.rXU(u.f),e.rXU(i.K_))};static#n=this.\u0275cmp=e.VBU({type:l,selectors:[["app-login"]],decls:20,vars:4,consts:[[1,"login-content",3,"fullscreen"],[1,"login-container"],["fill","outline","label","Phone Number","label-placement","floating","type","tel","name","phone","required","",1,"custom-input",3,"ngModelChange","ngModel"],["fill","outline","label","Password","label-placement","floating","type","password","name","password","required","",1,"custom-input",3,"ngModelChange","ngModel"],[1,"checkbox-forgot-row"],["lines","none",1,"checkbox-row"],["slot","start","name","rememberMe",1,"custom-checkbox",3,"ngModelChange","ngModel"],[1,"checkbox-label"],[1,"forgot-password",3,"click"],["expand","block",1,"login-button",3,"click"],[1,"bottom-text"],[1,"create-link",3,"click"]],template:function(o,t){1&o&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"h1"),e.EFF(3,"Login"),e.k0s(),e.j41(4,"ion-input",2),e.mxI("ngModelChange",function(r){return e.DH7(t.phone,r)||(t.phone=r),r}),e.k0s(),e.j41(5,"ion-input",3),e.mxI("ngModelChange",function(r){return e.DH7(t.password,r)||(t.password=r),r}),e.k0s(),e.j41(6,"div",4)(7,"ion-item",5)(8,"ion-checkbox",6),e.mxI("ngModelChange",function(r){return e.DH7(t.rememberMe,r)||(t.rememberMe=r),r}),e.k0s(),e.j41(9,"ion-label",7),e.EFF(10,"Remember Me"),e.k0s()(),e.j41(11,"a",8),e.bIt("click",function(){return t.goToForgotPassword()}),e.EFF(12,"Forgot Password?"),e.k0s()(),e.j41(13,"ion-button",9),e.bIt("click",function(){return t.login()}),e.EFF(14," Login "),e.k0s()(),e.j41(15,"div",10)(16,"span"),e.EFF(17,"New User? "),e.j41(18,"a",11),e.bIt("click",function(){return t.goToRegister()}),e.EFF(19,"Create Account"),e.k0s()()()()),2&o&&(e.Y8G("fullscreen",!0),e.R7$(4),e.R50("ngModel",t.phone),e.R7$(),e.R50("ngModel",t.password),e.R7$(3),e.R50("ngModel",t.rememberMe))},dependencies:[i.bv,i.Jm,i.eY,i.W9,i.$w,i.uz,i.he,i.hB,i.Gw,c.YN,c.BC,c.YS,c.vS,p.MD],styles:[".login-content[_ngcontent-%COMP%]{--background: #fff;display:flex;justify-content:center;align-items:center;padding:env(safe-area-inset-top) 20px env(safe-area-inset-bottom);height:100%;box-sizing:border-box}.login-content[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]{width:100%;max-width:320px;display:flex;flex-direction:column;justify-content:center;align-items:stretch;gap:16px}.login-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-size:28px;font-weight:700;margin-bottom:8px}.login-content[_ngcontent-%COMP%]   .custom-input[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;--background: #fff;--border-radius: 8px;--border-color: #3e5b94;border:1px solid #3e5b94;padding:8px;font-size:16px}.login-content[_ngcontent-%COMP%]   .checkbox-forgot-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:14px}.login-content[_ngcontent-%COMP%]   .checkbox-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.login-content[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{--checkbox-background-checked: #3e5b94;--border-color-checked: #3e5b94}.login-content[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{--background: #1e66c8;color:#fff;font-weight:700;border-radius:8px;height:44px}.login-content[_ngcontent-%COMP%]   .bottom-text[_ngcontent-%COMP%]{margin-top:24px;text-align:center;font-size:14px}.login-content[_ngcontent-%COMP%]   .create-link[_ngcontent-%COMP%]{color:#1e66c8;font-weight:600;text-decoration:underline;cursor:pointer}"]})}return l})()}}]);